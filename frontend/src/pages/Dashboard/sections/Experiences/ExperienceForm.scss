@import "../../../../styles/globals/variables";

// ====================================
// üìù EXPERIENCE FORM  
// ====================================

.experience-form {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
  padding: var(--spacing-xl);
  
  // ====================================
  // üè∑Ô∏è TYPE SELECTOR
  // ====================================
  
  &__type-selector {
    display: flex;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
  }
  
  &__type-btn {
    flex: 1;
    padding: var(--spacing-md) var(--spacing-lg);
    border: 2px solid var(--color-border);
    border-radius: var(--border-radius);
    background: var(--color-white);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    
    &--active {
      border-color: #{$primary-color};
      background: #{rgba($primary-color, 0.1)};
      color: #{$primary-color};
    }
    
    &:hover:not(&--active) {
      border-color: var(--color-gray-300);
      background: var(--color-gray-50);
    }
    
    [data-theme="dark"] & {
      background: var(--color-dark-400);
      border-color: var(--color-dark-border);
      color: var(--color-text-secondary);
      
      &--active {
        border-color: #{$secondary-color};
        background: #{rgba($secondary-color, 0.15)};
        color: #{$secondary-color};
      }
      
      &:hover:not(&--active) {
        background: var(--color-dark-300);
        border-color: var(--color-dark-200);
      }
    }
  }
  
  // ====================================
  // üìã FORM GROUPS
  // ====================================
  
  &__group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    
    &--row {
      flex-direction: row;
      gap: var(--spacing-md);
      
      .experience-form__field {
        flex: 1;
      }
    }
    
    &--dates {
      .experience-form__field {
        &:first-child {
          flex: 1;
        }
        
        &:last-child {
          flex: 1;
        }
      }
    }
  }
  
  &__field {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }
  
  &__label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semi-bold);
    color: var(--color-text-primary);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    
    &--required::after {
      content: "*";
      color: #ef4444;
    }
  }
  
  &__input {
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    font-size: var(--font-size-base);
    background: var(--color-white);
    color: var(--color-text-primary);
    transition: all 0.2s ease;
    
    &:focus {
      outline: none;
      border-color: #{$primary-color};
      box-shadow: 0 0 0 3px #{rgba($primary-color, 0.1)};
    }
    
    &:disabled {
      background: var(--color-gray-50);
      color: var(--color-text-secondary);
      cursor: not-allowed;
    }
    
    &--error {
      border-color: #ef4444;
      
      &:focus {
        border-color: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
      }
    }
    
    [data-theme="dark"] & {
      background: var(--color-dark-400);
      border-color: var(--color-dark-border);
      color: var(--color-text-primary);
      
      &:focus {
        border-color: #{$secondary-color};
        box-shadow: 0 0 0 3px #{rgba($secondary-color, 0.15)};
      }
      
      &:disabled {
        background: var(--color-dark-500);
        color: var(--color-text-secondary);
      }
    }
  }
  
  &__textarea {
    min-height: 120px;
    resize: vertical;
    font-family: inherit;
  }
  
  &__error {
    font-size: var(--font-size-xs);
    color: #ef4444;
    margin-top: var(--spacing-xs);
  }
  
  // ====================================
  // ‚úÖ ONGOING CHECKBOX
  // ====================================
  
  &__ongoing {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--color-gray-25);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    
    [data-theme="dark"] & {
      background: var(--color-dark-500);
      border-color: var(--color-dark-border);
    }
  }
  
  &__checkbox {
    width: 18px;
    height: 18px;
    accent-color: #{$primary-color};
    cursor: pointer;
  }
  
  &__checkbox-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-primary);
    cursor: pointer;
    margin: 0;
  }
  
  // ====================================
  // üìù DESCRIPTIONS DYNAMIC LIST
  // ====================================
  
  &__descriptions {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  &__description-item {
    display: flex;
    gap: var(--spacing-sm);
    align-items: flex-start;
  }
  
  &__description-input {
    flex: 1;
  }
  
  &__description-remove {
    padding: var(--spacing-sm);
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s ease;
    margin-top: var(--spacing-xs);
    
    &:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: #ef4444;
    }
  }
  
  &__description-add {
    padding: var(--spacing-sm) var(--spacing-md);
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: var(--font-size-sm);
    align-self: flex-start;
    
    &:hover {
      background: rgba(34, 197, 94, 0.2);
      border-color: #22c55e;
    }
  }
  
  // ====================================
  // üè∑Ô∏è TECHNOLOGIES TAGS
  // ====================================
  
  &__technologies {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }
  
  &__tech-input-wrapper {
    position: relative;
  }
  
  &__tech-input {
    padding-right: var(--spacing-3xl);
  }
  
  &__tech-add {
    position: absolute;
    right: var(--spacing-xs);
    top: 50%;
    transform: translateY(-50%);
    padding: var(--spacing-xs) var(--spacing-sm);
    background: #{$primary-color};
    color: white;
    border: none;
    border-radius: var(--border-radius-sm);
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: var(--font-size-xs);
    
    &:hover {
      background: #{darken($primary-color, 8%)};
    }
    
    &:disabled {
      background: var(--color-gray-300);
      cursor: not-allowed;
    }
  }
  
  &__tech-list {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    min-height: 40px;
    padding: var(--spacing-sm);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    background: var(--color-gray-25);
    
    &--empty {
      align-items: center;
      justify-content: center;
      color: var(--color-text-secondary);
      font-size: var(--font-size-sm);
      font-style: italic;
    }
    
    [data-theme="dark"] & {
      background: var(--color-dark-500);
      border-color: var(--color-dark-border);
    }
  }
  
  &__tech-tag {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    background: linear-gradient(135deg, #{$secondary-color} 0%, #{lighten($secondary-color, 10%)} 100%);
    color: #{darken($secondary-color, 30%)};
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    border: 1px solid #{rgba($secondary-color, 0.3)};
  }
  
  &__tech-remove {
    background: none;
    border: none;
    color: #{darken($secondary-color, 20%)};
    cursor: pointer;
    padding: 0;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
    
    &:hover {
      background: #{rgba($secondary-color, 0.3)};
      color: #{darken($secondary-color, 40%)};
    }
  }
  
  // ====================================
  // üéØ FORM ACTIONS
  // ====================================
  
  &__actions {
    display: flex;
    gap: var(--spacing-md);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--color-border);
    margin-top: var(--spacing-lg);
    justify-content: flex-end;
  }
  
  &__btn {
    padding: var(--spacing-md) var(--spacing-xl);
    border-radius: var(--border-radius);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    
    &--cancel {
      background: var(--color-white);
      color: var(--color-text-secondary);
      border: 1px solid var(--color-border);
      
      &:hover {
        background: var(--color-gray-50);
        color: var(--color-text-primary);
        border-color: var(--color-gray-300);
      }
      
      [data-theme="dark"] & {
        background: var(--color-dark-400);
        border-color: var(--color-dark-border);
        color: var(--color-text-secondary);
        
        &:hover {
          background: var(--color-dark-300);
          border-color: var(--color-dark-200);
          color: var(--color-text-primary);
        }
      }
    }
    
    &--save {
      background: #{$primary-color};
      color: white;
      border: 1px solid #{$primary-color};
      
      &:hover:not(:disabled) {
        background: #{darken($primary-color, 8%)};
        border-color: #{darken($primary-color, 8%)};
        transform: translateY(-1px);
        box-shadow: 0 4px 12px #{rgba($primary-color, 0.3)};
      }
      
      &:disabled {
        background: var(--color-gray-300);
        border-color: var(--color-gray-300);
        color: var(--color-text-secondary);
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      
      [data-theme="dark"] & {
        background: #{$secondary-color};
        border-color: #{$secondary-color};
        color: #{darken($secondary-color, 40%)};
        
        &:hover:not(:disabled) {
          background: #{lighten($secondary-color, 8%)};
          border-color: #{lighten($secondary-color, 8%)};
          box-shadow: 0 4px 12px #{rgba($secondary-color, 0.3)};
        }
      }
    }
    
    &--delete {
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
      
      &:hover {
        background: rgba(239, 68, 68, 0.2);
        border-color: #ef4444;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
      }
    }
  }
  
  // ====================================
  // ‚è≥ LOADING STATE
  // ====================================
  
  &--loading {
    opacity: 0.7;
    pointer-events: none;
  }
  
  &__loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius);
    
    [data-theme="dark"] & {
      background: rgba(15, 23, 42, 0.8);
    }
  }
  
  &__spinner {
    width: 32px;
    height: 32px;
    border: 3px solid var(--color-border);
    border-top: 3px solid #{$primary-color};
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
}

// ====================================
// üîÑ ANIMATIONS
// ====================================

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// ====================================
// üì± RESPONSIVE
// ====================================

@media (max-width: $tablet) {
  .experience-form {
    padding: var(--spacing-lg);
    
    &__group--row {
      flex-direction: column;
    }
    
    &__actions {
      flex-direction: column-reverse;
    }
    
    &__btn {
      width: 100%;
      justify-content: center;
    }
    
    &__type-selector {
      flex-direction: column;
    }
  }
}

@media (max-width: $mobile) {
  .experience-form {
    padding: var(--spacing-md);
    
    &__tech-input {
      padding-right: var(--spacing-2xl);
    }
    
    &__tech-add {
      right: var(--spacing-xs);
      padding: var(--spacing-xs);
    }
    
    &__tech-list {
      min-height: 60px;
    }
    
    &__description-item {
      flex-direction: column;
      
      .experience-form__description-remove {
        align-self: flex-end;
        margin-top: var(--spacing-sm);
      }
    }
  }
}
